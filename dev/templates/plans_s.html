<html lang="ru" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Планы">

    <title>Планы</title>

    <th:block th:insert="base :: links" />
    <link th:href="@{/css/tabs.css}" rel="stylesheet">
</head>

<body class="page">
    <div class="page__content">
        <div th:replace="base :: main-nav (logoClass='main-nav__logo_white')"></div>

        <div class="main-content main-content_white-top-medium">
            <div class="content-top">
                <h1 class="content-top__title">Excel</h1>
                <div th:replace="base :: excel-tab"></div>
            </div>
            <div class="content-main plans-content">
                <div class="container-table mb-container-table">
                    <h4 class="container-table__title">Ссылки на таблицы планов и мотиваций</h4>
                    <div class="table-responsive">
                        <table class="table table-sm table-plan">
                            <thead>
                            <tr>
                                <th>#</th>
                                <th>Название</th>
                                <th>Год</th>
                                <th>Ссылка</th>
                                <th class="cell-120"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="planSheet : ${planSheets}">
                                <td th:text="${planSheet.id}"></td>
                                <td th:text="${planSheet.name}"></td>
                                <td class="plans-table__center" th:text="${planSheet.year}"></td>
                                <td th:text="${planSheet.link}"></td>
                                <td class="cell-120">
                                    <form class="table-form" action="#" th:action="@{'deletePlanSheetLink/{id}'(id=${planSheet.id})}" th:method="delete">
                                        <button class="btn btn-sm btn-large btn-outline-secondary">Удалить</button>
                                    </form>
                                </td>
                            </tr>
                            <form class="table-form" action="#" th:action="@{addPlanSheetLink}" th:object="${planSheet}" th:method="post">
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td >
                                        <select class="filter__element mb-2 input-sm" filter-param th:field="*{year}">
                                            <option value="2020">2020</option>
                                            <option th:each="y : ${years}" th:value="${y}" th:utext="${y}"></option>
                                        </select>
                                    </td>
                                    <td><input class="input-sm input-large" th:field="*{link}" placeholder="Ссылка" required></td>
                                    <td class="cell-120">
                                        <button type="submit" class="btn btn-sm btn-large btn-outline-secondary">Добавить</button>
                                    </td>
                                </tr>
                            </form>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="container-table mb-container-table plans-container">
                    <h4 class="container-table__title">Процент выставленных счетов</h4>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <tbody>
                            <th:block >
                                <form class="table-form" action="#" th:action="@{'updatePercentBill'}" th:object="${percentFrom}" th:method="post">
                                    <tr>
                                        <td>
                                            <input class="input-sm input-medium" th:type="text" th:name="|billPercent.percent|" th:value="${billPercent.percent}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="cell-120">
                                            <button type="submit" class="btn btn-sm btn-large btn-outline-secondary">Сохранить</button>
                                        </td>
                                    </tr>
                                </form>
                            </th:block>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="content-main__wrapper content-main__distribution">
                    <div class="content-main__panel content-main__panel_align content-main__panel_p plans-bottom">
                        <table class="custom-table">
                            <tbody class="custom-table__body custom-table__body_white">
                            <tr class="custom-table__header-row">
                                <td class="custom-table__header-col custom-table__header-col_number custom-table__body-col_first">Пн</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Вт</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Ср</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Чт</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Пт</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Сб</td>
                                <td class="custom-table__header-col  custom-table__header-col_number">Вс</td>
                                <td class="custom-table__header-col"></td>
                            </tr>
                            <tr class="custom-table__body-row">
                                <th:block th:each="planPercent,stat : ${planPercents}">
                                    <td class="custom-table__body-col custom-table__header-col_number" th:classappend="${stat.index == 0 ? 'custom-table__body-col_first' : ''}">
                                        <div th:attr="data-day=${planPercent.dayOfWeek}" class="cell-number on-center" th:utext="${planPercent.percent}"></div>
                                    </td>
                                </th:block>
                                <td class="custom-table__body-col custom-table__body-col_last">
                                    <div class="column-links display-flex-none is-open">
                                        <div update-percent class="column_mwidth div-table__body-col_center column_mwidth-edit column_mwidth-edit-b"></div>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
    </div>


<div th:replace="base :: transition-loader"></div>
<script th:src="@{/js/transition-loader.js}"></script>
<script th:inline='javascript'>
    /*<![CDATA[*/
    showLoader();
/*]]>*/
</script>

<div th:replace="base :: menu-update-percent"></div>

<th:block th:insert="base :: scripts" />
<script th:src="@{/js/plan-percent-menu.js}"></script>
<script th:inline='javascript'>
    /*<![CDATA[*/
    var filter = null;
    var role = null;
    var items = null;
    var today = null;
    var manager = null;
    var company = null;
    var managers = null;
    var socials = null;
    /*]]>*/
</script>
</body>
</html>